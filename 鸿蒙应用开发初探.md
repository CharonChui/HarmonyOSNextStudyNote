因为OpenHarmony API 9开始新增的Stage模型，是**目前主推且会长期演进的模型**。
所以后面会全部使用Stage模型进行开发




#### 开发IDE

[DevEco Studio](https://developer.huawei.com/consumer/cn/deveco-studio/)

DevEco是基于inteliJ开源项目进行开发的，所以和Android Studio基本一样。   
开发工具整体来看和Android Studio基本类似。 

直接下载安装即可。 整个使用和Android Studio基本一样。 

接下来通过Create Project创建一个新项目。 
![image](https://github.com/CharonChui/Pictures/blob/master/eco_dev_create_project.png?raw=true)
这里选Empty Ablity的就可以。 

Ability：应用的基本组成部分，是应用所具备能力的抽象。Ability是系统调度应用的最小单元，是能够完成一个独立功能的组件，一个应用可以包含一个或多个Ability。 在FA模型与Stage模型，分别定义了不同类型的Ability。

接下来就是和Android Studio一样，填项目名、Bundle name就是包名，是应用程序的唯一标识，一般用公司的域名 com.huawei.xxx这样。 
Compatible SDK目前最新的就是API 9. 
这里有个Enable Super Visual，这是一种低代码的开发模式，对于一些简单的app可以使用，一般不用使用。 
![image](https://github.com/CharonChui/Pictures/blob/master/harmony_app_create_project_2.png?raw=true)

接着就能看到整个项目的目录:   

![image](https://github.com/CharonChui/Pictures/blob/master/deveco_project_struc.png?raw=true)

从上往下看:   

- AppScope下的app.json5 ：应用的全局配置信息。

```json
{
  "app": {
    "bundleName": "com.example.harmonyapp",
    "vendor": "example",
    "versionCode": 1000000,
    "versionName": "1.0.0",
    "icon": "$media:app_icon",
    "label": "$string:app_name"
  }
}
```
- entry：OpenHarmony工程模块，编译构建生成一个HAP包。

    - src > main > ets：用于存放ArkTS源码。下面又分为entryability：应用/服务的入口和pages：应用/服务包含的页面。
    - src > main > resources：用于存放应用/服务所用到的资源文件，如图形、多媒体、字符串、布局文件等。关于资源文件，详见资源文件的分类。
    - src > main > module.json5：模块配置文件。主要包含HAP包的配置信息、应用/服务在具体设备上的配置信息以及应用/服务的全局配置信息。
	```json
	{
  "module": {
    "name": "entry",
    "type": "entry",
    "description": "$string:module_desc",
    "mainElement": "EntryAbility",
    "deviceTypes": [
      "phone",
      "tablet"
    ],
    "deliveryWithInstall": true,
    "installationFree": false,
    "pages": "$profile:main_pages",
    "abilities": [
      {
        "name": "EntryAbility",
        "srcEntry": "./ets/entryability/EntryAbility.ts",
        "description": "$string:EntryAbility_desc",
        "icon": "$media:icon",
        "label": "$string:EntryAbility_label",
        "startWindowIcon": "$media:icon",
        "startWindowBackground": "$color:start_window_background",
        "exported": true,
        "skills": [
          {
            "entities": [
              "entity.system.home"
            ],
            "actions": [
              "action.system.home"
            ]
          }
        ]
      }
    ]
  }
}
	```
- build-profile.json5：当前的模块信息 、编译信息配置项，包括buildOption、targets配置等。
```json
{
  "apiType": 'stageMode',
  "buildOption": {
  },
  "targets": [
    {
      "name": "default",
      "runtimeOS": "HarmonyOS"
    },
    {
      "name": "ohosTest",
    }
  ]
}
```

- hvigorfile.ts：模块级编译构建任务脚本，开发者可以自定义相关任务和代码实现。
- obfuscation-rules.txt：混淆规则文件。混淆开启后，在使用Release模式进行编译时，会对代码进行编译、混淆及压缩处理，保护代码资产。
- build-profile.json5：应用级配置信息，包括签名signingConfigs、产品配置products等。
- hvigorfile.ts：应用级编译构建任务脚本。
- oh_modules：用于存放三方库依赖信息。


```typescript
// 表示该自定义组件为入口组件
@Entry
// 表示自定义组件
@Component
// 自定义组件
struct Index {
  // 表示组件中的状态变量，状态变量变化会触发UI刷新。
  @State message: string = 'Hello World'
  // 以声明式的方式来描述UI的结构
  build() {
    // 行布局
    Row() {
      // 列布局
      Column() {
        // 文字、字体大小、字体加粗
        Text(this.message)
          .fontSize(50)
          .fontWeight(FontWeight.Bold)
      }
      // 列布局的宽为屏幕宽度
      .width('100%')

      // 添加按钮，以响应用户点击
      Button() {
        // 按钮文案、文字大小颜色、样式
        Text('戳我')
          .fontSize(40)
          .fontColor(Color.Red)
          // 比粗体更粗
          .fontWeight(FontWeight.Bolder)
      }.type(ButtonType.Capsule) // 按钮风格： 胶囊型按钮（圆角默认为高度的一半）
      .margin({
        // 距离上一个的高度
        top: 20
      })
      .onClick(() => {
          this.message = 'Hello Harmony'
      })
      .backgroundColor('#0D9FFB')
      .width('40%')
      .height('5%')
    }
    // 行布局的高度为屏幕高度
    .height('100%')
  }
}
```

ArkTS通过装饰器@Component和@Entry装饰struct关键字声明的数据结构，构成一个自定义组件。自定义组件中提供了一个build函数，开发者需在该函数内以链式调用的方式进行基本的UI描述

![image](https://github.com/CharonChui/Pictures/blob/master/arkts_demo_1.png?raw=true)


装饰器： 用于装饰类、结构、方法以及变量，并赋予其特殊的含义。如上述示例中@Entry、@Component和@State都是装饰器，@Component表示自定义组件，@Entry表示该自定义组件为入口组件，@State表示组件中的状态变量，状态变量变化会触发UI刷新。
UI描述：以声明式的方式来描述UI的结构，例如build()方法中的代码块。
自定义组件：可复用的UI单元，可组合其他组件，如上述被@Component装饰的struct Hello。
系统组件：ArkUI框架中默认内置的基础和容器组件，可直接被开发者调用，比如示例中的Column、Text、Divider、Button。
属性方法：组件可以通过链式调用配置多项属性，如fontSize()、width()、height()、backgroundColor()等。
事件方法：组件可以通过链式调用设置多个事件的响应逻辑，如跟随在Button后面的onClick()。
系统组件、属性方法、事件方法具体使用可参考基于ArkTS的声明式开发范式。





