6.应用程序框架
===


## UIAbility

UIAbility: 系统调度的单元，提供窗口用于绘制界面。


![image](https://github.com/CharonChui/Pictures/blob/master/UIAbility_single_more.png?raw=true)

每一个UIAbility实例都对应于一个最近任务列表中的任务。  

一个应用可以有一个UIAbility，也可以有多个UIAbility。 
建议将一个独立的功能模块放到同一个UIAbility中，例如:   

- 浏览器应用可以通过一个UIAbility结合多页面的形式让用户进行搜索和浏览内容。
- 而聊天应用增加一个外卖功能的场景，则可以将聊天应用中外卖功能的内容独立为一个UIAbility。 当用户打开聊天应用的外卖功能，查看外卖订单详情时，此时有新的聊天消息，则可以通过最近任务列表切换回到聊天窗口继续进行聊天对话。 



## Page

页面

src/main/ets/pages目录中的文件

## 路由


url路径需要在entry/src/resources/base/profile/main_pages.json中配置

```TypeScript
router.pushUrl({url: 'pages/Second', params: {param1: 'haha'}})
```
第二个页面获取
```TypeScript
name: string = router.getParams()?.['param1']
```
第二个页面返回: 
```TypeScript
router.back()
```



### UIAbility的生命周期

![image](https://github.com/CharonChui/Pictures/blob/master/uiability_shengmingzhouqi.png?raw=true)

- WindowStageCreate和WindowStageDestroy是UIAbility中管理UI界面功能的两个生命周期回调。
- 每一个UIAbility都包含一个Context属性。 


- onCreate: Create状态实在应用加载过程中，系统会调用onCreate()回调，可以在该回调中进行应用初始化操作。例如，变量定义，资源加载等。
- WindowStageCreate
- 进入Foreground之前，系统会调用 WindowStageCreate()回调，该页面可以设置UI页面加载，设置WindowStage的时间订阅(获焦、失焦，可见、不可见)
onForeground: UIAbility可见之前回调。可以申请系统需要的资源，或者重新申请在onBackground中释放的资源
onBackground: UIAbility界面完全不可见之后的回调。可以释放UI页面不可见时无用的资源，或者在此回调中执行较为耗时的操作，例如状态保存等。
- WindowStageDestroy: UIAbility销毁之前回调
- onDestroy： 销毁，可以释放资源，数据保存。







----------


- [上一篇:4.HarmonyOS应用开发初探](https://github.com/CharonChui/HarmonyOSNextStudyNote/blob/main/4.HarmonyOS%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E5%88%9D%E6%8E%A2.md)



    
---

- 邮箱 ：charon.chui@gmail.com  
- Good Luck! 
